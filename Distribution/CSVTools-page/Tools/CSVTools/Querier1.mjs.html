<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formatted Code - JavaScript</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', Courier, monospace;
            background: #ffffff;
            padding: 3rem;
            color: #000000;
            line-height: 1.6;
            font-size: 12pt;
            font-weight: bold;
            font-style: normal;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: #ffffff;
        }

        .code-container {
            background: #ffffff;
            padding: 0;
        }

        .code-line {
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-bottom: 0.1rem;
        }

        .comment {
            color: #228b22;
            font-size: 11pt;
            font-family: 'Bookman Old Style', serif;
            font-weight: normal;
            font-style: normal;
        }

        .keyword {
            color: #0000ff;
            font-weight: 600;
        }

        .string {
            color: #a31515;
        }

        .number {
            color: #098658;
        }

        .function {
            color: #795e26;
        }

        .operator {
            color: #000000;
        }

        .type {
            color: #267f99;
        }

        .variable {
            color: #001080;
        }

        @media print {
            body {
                padding: 1rem;
            }

            .code-container {
                border: none;
                padding: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="code-container">
            <div class="code-line"><span class="comment">QUERIER1 - FEATURE-MODE COMPARISON TRAVERSER</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Regular expression to extract mode identifiers from query text Matches patterns like &quot;mode</span></div>
            <div class="code-line"><span class="comment">A&quot;, &quot;mode F&quot;, &quot;mode default&quot; Global and case-insensitive flags allow multiple mode</span></div>
            <div class="code-line"><span class="comment">extractions</span></div>
            <div class="code-line"><span class="keyword">const</span><span class="operator"> </span><span class="type">MODE_REGEX</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="operator">/</span><span class="variable">mode</span><span class="operator">\</span><span class="variable">s</span><span class="operator">+</span><span class="operator">(</span><span class="operator">[</span><span class="variable">a</span><span class="operator">-</span><span class="variable">z0</span><span class="operator">-</span><span class="number">9</span><span class="variable">_</span><span class="operator">-</span><span class="operator">]</span><span class="operator">+</span><span class="operator">)</span><span class="operator">/</span><span class="variable">gi</span><span class="operator">;</span></div>
            <div class="code-line"></div>
            <div class="code-line"><span class="comment">==========================================================================================</span></div>
            <div class="code-line"><span class="comment">FEATURE EXTRACTION</span></div>
            <div class="code-line"><span class="comment">==========================================================================================</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Extracts feature identifier from query</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Purpose: Determines which feature to analyze by checking query structure and fallback path</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Extraction Strategy (priority order): 1. JSON query with &quot;feature&quot; property: {</span></div>
            <div class="code-line"><span class="comment">&quot;type&quot;:&quot;feature-mode&quot;,&quot;feature&quot;:&quot;N44&quot;} 2. Text pattern matching: &quot;feature N44&quot; or &quot;feature</span></div>
            <div class="code-line"><span class="comment">grid-system&quot; 3. Fallback to file path: Strips extension from filename</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Features: - Supports structured JSON queries - Supports natural language queries - Falls</span></div>
            <div class="code-line"><span class="comment">back to context-based inference - Removes file extensions from fallback values</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">@param {Object} query - Parsed query object (from parseQueryCell) @param {string} fallback</span></div>
            <div class="code-line"><span class="comment">- Fallback path (usually current file path) @returns {string} Extracted feature identifier</span></div>
            <div class="code-line"><span class="comment">or empty string</span></div>
            <div class="code-line"><span class="keyword">function</span><span class="operator"> </span><span class="function">extractFeature</span><span class="operator">(</span><span class="variable">query</span><span class="operator">,</span><span class="operator"> </span><span class="variable">fallback</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="comment">Check JSON query format first</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="keyword">if</span><span class="operator"> </span><span class="operator">(</span><span class="variable">query</span><span class="operator">.</span><span class="variable">json</span><span class="operator">?</span><span class="operator">.</span><span class="variable">feature</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">return</span><span class="operator"> </span><span class="function">String</span><span class="operator">(</span><span class="variable">query</span><span class="operator">.</span><span class="variable">json</span><span class="operator">.</span><span class="variable">feature</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="comment">Check text pattern: &quot;feature &lt;identifier&gt;&quot;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="keyword">const</span><span class="operator"> </span><span class="variable">match</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="variable">query</span><span class="operator">.</span><span class="variable">text</span><span class="operator">.</span><span class="function">match</span><span class="operator">(</span><span class="operator">/</span><span class="variable">feature</span><span class="operator">\</span><span class="variable">s</span><span class="operator">+</span><span class="operator">(</span><span class="operator">[</span><span class="variable">a</span><span class="operator">-</span><span class="variable">z0</span><span class="operator">-</span><span class="number">9</span><span class="variable">_</span><span class="operator">-</span><span class="operator">]</span><span class="operator">+</span><span class="operator">)</span><span class="operator">/</span><span class="variable">i</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="keyword">if</span><span class="operator"> </span><span class="operator">(</span><span class="variable">match</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">return</span><span class="operator"> </span><span class="variable">match</span><span class="operator">[</span><span class="number">1</span><span class="operator">]</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="comment">Fall back to filename without extension</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="keyword">if</span><span class="operator"> </span><span class="operator">(</span><span class="variable">fallback</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">return</span><span class="operator"> </span><span class="variable">fallback</span><span class="operator">.</span><span class="function">replace</span><span class="operator">(</span><span class="operator">/</span><span class="operator">\</span><span class="operator">.</span><span class="operator">[</span><span class="operator">^</span><span class="operator">.</span><span class="operator">]</span><span class="operator">+</span><span class="operator">$</span><span class="operator">/</span><span class="operator">,</span><span class="operator"> </span><span class="string">&#039;&#039;</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="keyword">return</span><span class="operator"> </span><span class="string">&#039;&#039;</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator">}</span></div>
            <div class="code-line"></div>
            <div class="code-line"><span class="comment">==========================================================================================</span></div>
            <div class="code-line"><span class="comment">MODE EXTRACTION</span></div>
            <div class="code-line"><span class="comment">==========================================================================================</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Extracts all mode identifiers from query</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Purpose: Identifies which modes to compare for the feature analysis</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Extraction Strategy (priority order): 1. JSON query with &quot;modes&quot; array: {</span></div>
            <div class="code-line"><span class="comment">&quot;type&quot;:&quot;feature-mode&quot;,&quot;modes&quot;:[&quot;A&quot;,&quot;F&quot;]} 2. Text pattern matching: Multiple &quot;mode X&quot;</span></div>
            <div class="code-line"><span class="comment">occurrences in query text</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Features: - Supports multiple mode extraction from single query - Handles both JSON array</span></div>
            <div class="code-line"><span class="comment">and text patterns - Returns array even for single mode (consistency) - Resets regex state</span></div>
            <div class="code-line"><span class="comment">between uses to prevent position bugs</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">@param {Object} query - Parsed query object (from parseQueryCell) @returns {Array&lt;string&gt;}</span></div>
            <div class="code-line"><span class="comment">Array of mode identifiers (may be empty)</span></div>
            <div class="code-line"><span class="keyword">function</span><span class="operator"> </span><span class="function">extractModes</span><span class="operator">(</span><span class="variable">query</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="comment">Check JSON query format first</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="keyword">if</span><span class="operator"> </span><span class="operator">(</span><span class="type">Array</span><span class="operator">.</span><span class="function">isArray</span><span class="operator">(</span><span class="variable">query</span><span class="operator">.</span><span class="variable">json</span><span class="operator">?</span><span class="operator">.</span><span class="variable">modes</span><span class="operator">)</span><span class="operator"> </span><span class="operator">&amp;</span><span class="operator">&amp;</span><span class="operator"> </span><span class="variable">query</span><span class="operator">.</span><span class="variable">json</span><span class="operator">.</span><span class="variable">modes</span><span class="operator">.</span><span class="variable">length</span><span class="operator"> </span><span class="operator">&gt;</span><span class="operator"> </span><span class="number">0</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">return</span><span class="operator"> </span><span class="variable">query</span><span class="operator">.</span><span class="variable">json</span><span class="operator">.</span><span class="variable">modes</span><span class="operator">.</span><span class="function">map</span><span class="operator">(</span><span class="type">String</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="comment">Extract all mode patterns from text using regex</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="keyword">const</span><span class="operator"> </span><span class="variable">matches</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="operator">[</span><span class="operator">]</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="keyword">let</span><span class="operator"> </span><span class="variable">result</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="keyword">while</span><span class="operator"> </span><span class="operator">(</span><span class="operator">(</span><span class="variable">result</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="type">MODE_REGEX</span><span class="operator">.</span><span class="function">exec</span><span class="operator">(</span><span class="variable">query</span><span class="operator">.</span><span class="variable">text</span><span class="operator">)</span><span class="operator">)</span><span class="operator"> </span><span class="operator">!</span><span class="operator">=</span><span class="operator">=</span><span class="operator"> </span><span class="keyword">null</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="variable">matches</span><span class="operator">.</span><span class="function">push</span><span class="operator">(</span><span class="variable">result</span><span class="operator">[</span><span class="number">1</span><span class="operator">]</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="keyword">return</span><span class="operator"> </span><span class="variable">matches</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator">}</span></div>
            <div class="code-line"></div>
            <div class="code-line"><span class="comment">==========================================================================================</span></div>
            <div class="code-line"><span class="comment">TEXT COLLECTION</span></div>
            <div class="code-line"><span class="comment">==========================================================================================</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Collects and concatenates text from multiple CSV columns</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Purpose: Gathers searchable text content from specified columns for pattern matching</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Features: - Handles null/undefined values gracefully - Converts all values to lowercase</span></div>
            <div class="code-line"><span class="comment">for case-insensitive matching - Joins multiple columns with space separator - Returns</span></div>
            <div class="code-line"><span class="comment">single normalized string for easy searching</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">@param {Array} row - CSV row data array @param {Array&lt;number&gt;} indices - Array of column</span></div>
            <div class="code-line"><span class="comment">indices to collect @returns {string} Concatenated lowercase text from all specified</span></div>
            <div class="code-line"><span class="comment">columns</span></div>
            <div class="code-line"><span class="keyword">function</span><span class="operator"> </span><span class="function">collectText</span><span class="operator">(</span><span class="variable">row</span><span class="operator">,</span><span class="operator"> </span><span class="variable">indices</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="keyword">return</span><span class="operator"> </span><span class="variable">indices</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator">.</span><span class="function">map</span><span class="operator">(</span><span class="operator">(</span><span class="variable">index</span><span class="operator">)</span><span class="operator"> </span><span class="operator">=</span><span class="operator">&gt;</span><span class="operator"> </span><span class="operator">(</span><span class="operator">(</span><span class="variable">row</span><span class="operator">[</span><span class="variable">index</span><span class="operator">]</span><span class="operator"> </span><span class="operator">?</span><span class="operator">?</span><span class="operator"> </span><span class="string">&#039;&#039;</span><span class="operator">)</span><span class="operator">.</span><span class="function">toString</span><span class="operator">(</span><span class="operator">)</span><span class="operator">.</span><span class="function">toLowerCase</span><span class="operator">(</span><span class="operator">)</span><span class="operator">)</span><span class="operator">)</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator">.</span><span class="function">join</span><span class="operator">(</span><span class="string">&#039; &#039;</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator">}</span></div>
            <div class="code-line"></div>
            <div class="code-line"><span class="comment">==========================================================================================</span></div>
            <div class="code-line"><span class="comment">FEATURE-MODE TRAVERSER IMPLEMENTATION</span></div>
            <div class="code-line"><span class="comment">==========================================================================================</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Feature-Mode Comparison Traverser</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Purpose: Compares how a feature behaves across different modes by scanning the codebase</span></div>
            <div class="code-line"><span class="comment">for files that reference both the feature and specific modes</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Use Cases: - Query: &quot;feature N44 mode A mode F&quot; - Compare N44 implementation in mode A vs</span></div>
            <div class="code-line"><span class="comment">mode F - Query: {&quot;type&quot;:&quot;feature-mode&quot;,&quot;feature&quot;:&quot;grid&quot;,&quot;modes&quot;:[&quot;default&quot;,&quot;custom&quot;]}</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Delegation Pattern: - matches(context): Returns true if query contains both &quot;feature&quot; and</span></div>
            <div class="code-line"><span class="comment">&quot;mode&quot; keywords - run(context): Executes feature-mode analysis and returns formatted</span></div>
            <div class="code-line"><span class="comment">results</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Analysis Strategy: 1. Extract feature identifier and mode list from query 2. Scan all rows</span></div>
            <div class="code-line"><span class="comment">for files containing feature token 3. Categorize files by which modes they reference 4.</span></div>
            <div class="code-line"><span class="comment">Generate report showing file distribution across modes</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Search Columns: - SUMMARY: High-level file description - FUNCTIONS: List of functions</span></div>
            <div class="code-line"><span class="comment">defined in file - ORDER_OF_OPERATIONS: Call sequence documentation</span></div>
            <div class="code-line"><span class="keyword">export</span><span class="operator"> </span><span class="keyword">default</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="comment">Traverser identifier for logging and debugging</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="variable">id</span><span class="operator">:</span><span class="operator"> </span><span class="string">&#039;feature-mode&#039;</span><span class="operator">,</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="comment">Human-readable description of traverser purpose</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="variable">description</span><span class="operator">:</span><span class="operator"> </span><span class="string">&#039;Compares how a feature behaves across different modes.&#039;</span><span class="operator">,</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span></div>
            <div class="code-line"><span class="comment">Determines if this traverser should handle the query</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Matching Logic: - JSON queries with type=&quot;feature-mode&quot; - Text queries containing both</span></div>
            <div class="code-line"><span class="comment">&quot;feature&quot; and &quot;mode&quot; keywords</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">@param {Object} context - Query context with query object @returns {boolean} True if</span></div>
            <div class="code-line"><span class="comment">traverser should handle query</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="function">matches</span><span class="operator">(</span><span class="variable">context</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">Check for explicit JSON type designation</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">if</span><span class="operator"> </span><span class="operator">(</span><span class="variable">context</span><span class="operator">.</span><span class="variable">query</span><span class="operator">.</span><span class="variable">json</span><span class="operator">?</span><span class="operator">.</span><span class="variable">type</span><span class="operator"> </span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator"> </span><span class="string">&#039;feature-mode&#039;</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">return</span><span class="operator"> </span><span class="keyword">true</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">Check for keyword presence in text query</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">const</span><span class="operator"> </span><span class="variable">text</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="variable">context</span><span class="operator">.</span><span class="variable">query</span><span class="operator">.</span><span class="variable">text</span><span class="operator">.</span><span class="function">toLowerCase</span><span class="operator">(</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">return</span><span class="operator"> </span><span class="variable">text</span><span class="operator">.</span><span class="function">includes</span><span class="operator">(</span><span class="string">&#039;feature&#039;</span><span class="operator">)</span><span class="operator"> </span><span class="operator">&amp;</span><span class="operator">&amp;</span><span class="operator"> </span><span class="variable">text</span><span class="operator">.</span><span class="function">includes</span><span class="operator">(</span><span class="string">&#039;mode&#039;</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span><span class="operator">,</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span></div>
            <div class="code-line"><span class="comment">Executes feature-mode analysis and generates results</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Workflow: 1. Extract feature identifier (with fallback to current file path) 2. Extract</span></div>
            <div class="code-line"><span class="comment">mode list (defaults to [&quot;default&quot;] if none specified) 3. Identify searchable columns (</span></div>
            <div class="code-line"><span class="comment">SUMMARY, FUNCTIONS, ORDER_OF_OPERATIONS) 4. Scan all rows for files containing feature</span></div>
            <div class="code-line"><span class="comment">token 5. Categorize files into mode-specific buckets 6. Track files that reference feature</span></div>
            <div class="code-line"><span class="comment">but no specific mode 7. Generate formatted report with file counts and listings</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">Result Format: - Header: Feature name and mode list - Per-mode sections: File count and</span></div>
            <div class="code-line"><span class="comment">file list (up to 5 shown, rest counted) - General references: Files mentioning feature</span></div>
            <div class="code-line"><span class="comment">without mode context - Current row summary: SUMMARY column content for context</span></div>
            <div class="code-line">&nbsp;</div>
            <div class="code-line"><span class="comment">@param {Object} context - Complete query context with row data and helpers @returns {</span></div>
            <div class="code-line"><span class="comment">string} Formatted multi-line report text</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="function">run</span><span class="operator">(</span><span class="variable">context</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">const</span><span class="operator"> </span><span class="operator">{</span><span class="operator"> </span><span class="variable">query</span><span class="operator">,</span><span class="operator"> </span><span class="variable">rows</span><span class="operator">,</span><span class="operator"> </span><span class="variable">headers</span><span class="operator">,</span><span class="operator"> </span><span class="variable">row</span><span class="operator">,</span><span class="operator"> </span><span class="variable">getPath</span><span class="operator">,</span><span class="operator"> </span><span class="variable">getValue</span><span class="operator"> </span><span class="operator">}</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="variable">context</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">Extract feature identifier with fallback to current file</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">const</span><span class="operator"> </span><span class="variable">feature</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="function">extractFeature</span><span class="operator">(</span><span class="variable">query</span><span class="operator">,</span><span class="operator"> </span><span class="function">getPath</span><span class="operator">(</span><span class="variable">row</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">if</span><span class="operator"> </span><span class="operator">(</span><span class="operator">!</span><span class="variable">feature</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">return</span><span class="operator"> </span><span class="string">&#039;feature-mode: Provide a feature name (e.g., {&quot;type&quot;:&quot;feature-mode&quot;,</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="string">&quot;feature&quot;</span><span class="operator">:</span><span class="string">&quot;N44&quot;</span><span class="operator">,</span><span class="string">&quot;modes&quot;</span><span class="operator">:</span><span class="operator">[</span><span class="string">&quot;A&quot;</span><span class="operator">,</span><span class="string">&quot;F&quot;</span><span class="operator">]</span><span class="operator">}</span><span class="operator">)</span><span class="operator">.</span><span class="string">&#039;;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">Extract mode list with default fallback</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">const</span><span class="operator"> </span><span class="variable">modes</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="function">extractModes</span><span class="operator">(</span><span class="variable">query</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">if</span><span class="operator"> </span><span class="operator">(</span><span class="variable">modes</span><span class="operator">.</span><span class="variable">length</span><span class="operator"> </span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator"> </span><span class="number">0</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="variable">modes</span><span class="operator">.</span><span class="function">push</span><span class="operator">(</span><span class="string">&#039;default&#039;</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">Prepare feature token for case-insensitive matching</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">const</span><span class="operator"> </span><span class="variable">featureToken</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="variable">feature</span><span class="operator">.</span><span class="function">toLowerCase</span><span class="operator">(</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">Find indices of columns to search</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">const</span><span class="operator"> </span><span class="variable">summaryIndex</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="variable">headers</span><span class="operator">.</span><span class="function">findIndex</span><span class="operator">(</span><span class="operator">(</span><span class="variable">h</span><span class="operator">)</span><span class="operator"> </span><span class="operator">=</span><span class="operator">&gt;</span><span class="operator"> </span><span class="variable">h</span><span class="operator">.</span><span class="function">trim</span><span class="operator">(</span><span class="operator">)</span><span class="operator">.</span><span class="function">toUpperCase</span><span class="operator">(</span><span class="operator">)</span><span class="operator"> </span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator"> </span><span class="string">&#039;SUMMARY&#039;</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">const</span><span class="operator"> </span><span class="variable">functionsIndex</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="variable">headers</span><span class="operator">.</span><span class="function">findIndex</span><span class="operator">(</span><span class="operator">(</span><span class="variable">h</span><span class="operator">)</span><span class="operator"> </span><span class="operator">=</span><span class="operator">&gt;</span><span class="operator"> </span><span class="variable">h</span><span class="operator">.</span><span class="function">trim</span><span class="operator">(</span><span class="operator">)</span><span class="operator">.</span><span class="function">toUpperCase</span><span class="operator">(</span><span class="operator">)</span><span class="operator"> </span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator"> </span><span class="string">&#039;FUNCTIONS&#039;</span><span class="operator">)</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">const</span><span class="operator"> </span><span class="variable">orderIndex</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="variable">headers</span><span class="operator">.</span><span class="function">findIndex</span><span class="operator">(</span><span class="operator">(</span><span class="variable">h</span><span class="operator">)</span><span class="operator"> </span><span class="operator">=</span><span class="operator">&gt;</span><span class="operator"> </span><span class="variable">h</span><span class="operator">.</span><span class="function">trim</span><span class="operator">(</span><span class="operator">)</span><span class="operator">.</span><span class="function">toUpperCase</span><span class="operator">(</span><span class="operator">)</span><span class="operator"> </span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="string">&#039;ORDER_OF_OPERATIONS&#039;</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">const</span><span class="operator"> </span><span class="variable">searchableIndices</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="operator">[</span><span class="variable">summaryIndex</span><span class="operator">,</span><span class="operator"> </span><span class="variable">functionsIndex</span><span class="operator">,</span><span class="operator"> </span><span class="variable">orderIndex</span><span class="operator">]</span><span class="operator">.</span><span class="function">filter</span><span class="operator">(</span><span class="operator">(</span><span class="variable">index</span><span class="operator">)</span><span class="operator"> </span><span class="operator">=</span><span class="operator">&gt;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="variable">index</span><span class="operator"> </span><span class="operator">&gt;</span><span class="operator">=</span><span class="operator"> </span><span class="number">0</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">Initialize data structures for categorization</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">const</span><span class="operator"> </span><span class="variable">buckets</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="keyword">new</span><span class="operator"> </span><span class="function">Map</span><span class="operator">(</span><span class="operator">)</span><span class="operator">;</span><span class="operator"> </span><span class="comment">mode -&gt; array of file paths</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">const</span><span class="operator"> </span><span class="variable">otherMatches</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="operator">[</span><span class="operator">]</span><span class="operator">;</span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">files with feature but no mode reference</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">Scan all rows for feature and mode references</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="variable">rows</span><span class="operator">.</span><span class="function">forEach</span><span class="operator">(</span><span class="operator">(</span><span class="variable">loopRow</span><span class="operator">)</span><span class="operator"> </span><span class="operator">=</span><span class="operator">&gt;</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">Collect searchable text from all relevant columns</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">const</span><span class="operator"> </span><span class="variable">content</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="function">collectText</span><span class="operator">(</span><span class="variable">loopRow</span><span class="operator">,</span><span class="operator"> </span><span class="variable">searchableIndices</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">Skip rows that don&#039;t mention the feature</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">if</span><span class="operator"> </span><span class="operator">(</span><span class="operator">!</span><span class="variable">content</span><span class="operator">.</span><span class="function">includes</span><span class="operator">(</span><span class="variable">featureToken</span><span class="operator">)</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">return</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">Get file path for this row</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">const</span><span class="operator"> </span><span class="variable">loopPath</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="variable">context</span><span class="operator">.</span><span class="function">buildRowPath</span><span class="operator">(</span><span class="variable">loopRow</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">let</span><span class="operator"> </span><span class="variable">matchedAnyMode</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="keyword">false</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">Check each mode for presence in content</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="variable">modes</span><span class="operator">.</span><span class="function">forEach</span><span class="operator">(</span><span class="operator">(</span><span class="variable">mode</span><span class="operator">)</span><span class="operator"> </span><span class="operator">=</span><span class="operator">&gt;</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">const</span><span class="operator"> </span><span class="variable">modeToken</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="variable">mode</span><span class="operator">.</span><span class="function">toString</span><span class="operator">(</span><span class="operator">)</span><span class="operator">.</span><span class="function">toLowerCase</span><span class="operator">(</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">if</span><span class="operator"> </span><span class="operator">(</span><span class="variable">content</span><span class="operator">.</span><span class="function">includes</span><span class="operator">(</span><span class="variable">modeToken</span><span class="operator">)</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="variable">matchedAnyMode</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="keyword">true</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">Initialize bucket for this mode if needed</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">if</span><span class="operator"> </span><span class="operator">(</span><span class="operator">!</span><span class="variable">buckets</span><span class="operator">.</span><span class="function">has</span><span class="operator">(</span><span class="variable">mode</span><span class="operator">)</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="variable">buckets</span><span class="operator">.</span><span class="function">set</span><span class="operator">(</span><span class="variable">mode</span><span class="operator">,</span><span class="operator"> </span><span class="operator">[</span><span class="operator">]</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="variable">buckets</span><span class="operator">.</span><span class="function">get</span><span class="operator">(</span><span class="variable">mode</span><span class="operator">)</span><span class="operator">.</span><span class="function">push</span><span class="operator">(</span><span class="variable">loopPath</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">Track files that mention feature but no specific mode</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">if</span><span class="operator"> </span><span class="operator">(</span><span class="operator">!</span><span class="variable">matchedAnyMode</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="variable">otherMatches</span><span class="operator">.</span><span class="function">push</span><span class="operator">(</span><span class="variable">loopPath</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">Build formatted report</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">const</span><span class="operator"> </span><span class="variable">lines</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="operator">[</span><span class="operator">]</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="variable">lines</span><span class="operator">.</span><span class="function">push</span><span class="operator">(</span><span class="string">`Feature &quot;${feature}&quot; mode scan (${modes.join(&#039;, &#039;)})`</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">Add per-mode sections</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="variable">modes</span><span class="operator">.</span><span class="function">forEach</span><span class="operator">(</span><span class="operator">(</span><span class="variable">mode</span><span class="operator">)</span><span class="operator"> </span><span class="operator">=</span><span class="operator">&gt;</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">const</span><span class="operator"> </span><span class="variable">list</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="variable">buckets</span><span class="operator">.</span><span class="function">get</span><span class="operator">(</span><span class="variable">mode</span><span class="operator">)</span><span class="operator"> </span><span class="operator">?</span><span class="operator">?</span><span class="operator"> </span><span class="operator">[</span><span class="operator">]</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">if</span><span class="operator"> </span><span class="operator">(</span><span class="variable">list</span><span class="operator">.</span><span class="variable">length</span><span class="operator"> </span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator"> </span><span class="number">0</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="variable">lines</span><span class="operator">.</span><span class="function">push</span><span class="operator">(</span><span class="string">`- Mode ${mode}: no direct references found.`</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span><span class="operator"> </span><span class="keyword">else</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="variable">lines</span><span class="operator">.</span><span class="function">push</span><span class="operator">(</span><span class="string">`- Mode ${mode}: ${list.length} file(s)`</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">Show up to 5 files, indicate if more exist</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="variable">list</span><span class="operator">.</span><span class="function">slice</span><span class="operator">(</span><span class="number">0</span><span class="operator">,</span><span class="operator"> </span><span class="number">5</span><span class="operator">)</span><span class="operator">.</span><span class="function">forEach</span><span class="operator">(</span><span class="operator">(</span><span class="variable">file</span><span class="operator">)</span><span class="operator"> </span><span class="operator">=</span><span class="operator">&gt;</span><span class="operator"> </span><span class="variable">lines</span><span class="operator">.</span><span class="function">push</span><span class="operator">(</span><span class="string">`     ${file}`</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">if</span><span class="operator"> </span><span class="operator">(</span><span class="variable">list</span><span class="operator">.</span><span class="variable">length</span><span class="operator"> </span><span class="operator">&gt;</span><span class="operator"> </span><span class="number">5</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="variable">lines</span><span class="operator">.</span><span class="function">push</span><span class="operator">(</span><span class="string">`     ... +${list.length - 5} more`</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">Add general references section if applicable</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">if</span><span class="operator"> </span><span class="operator">(</span><span class="variable">otherMatches</span><span class="operator">.</span><span class="variable">length</span><span class="operator"> </span><span class="operator">&gt;</span><span class="operator"> </span><span class="number">0</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="variable">lines</span><span class="operator">.</span><span class="function">push</span><span class="operator">(</span><span class="string">`- General references (mode not specified): ${otherMatches.length}`</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="variable">otherMatches</span><span class="operator">.</span><span class="function">slice</span><span class="operator">(</span><span class="number">0</span><span class="operator">,</span><span class="operator"> </span><span class="number">5</span><span class="operator">)</span><span class="operator">.</span><span class="function">forEach</span><span class="operator">(</span><span class="operator">(</span><span class="variable">file</span><span class="operator">)</span><span class="operator"> </span><span class="operator">=</span><span class="operator">&gt;</span><span class="operator"> </span><span class="variable">lines</span><span class="operator">.</span><span class="function">push</span><span class="operator">(</span><span class="string">`     ${file}`</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="comment">Add current row summary for context</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">const</span><span class="operator"> </span><span class="variable">rowSummary</span><span class="operator"> </span><span class="operator">=</span><span class="operator"> </span><span class="function">getValue</span><span class="operator">(</span><span class="variable">row</span><span class="operator">,</span><span class="operator"> </span><span class="string">&#039;SUMMARY&#039;</span><span class="operator">)</span><span class="operator">.</span><span class="function">trim</span><span class="operator">(</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">if</span><span class="operator"> </span><span class="operator">(</span><span class="variable">rowSummary</span><span class="operator">)</span><span class="operator"> </span><span class="operator">{</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="variable">lines</span><span class="operator">.</span><span class="function">push</span><span class="operator">(</span><span class="string">&#039;&#039;</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="variable">lines</span><span class="operator">.</span><span class="function">push</span><span class="operator">(</span><span class="string">`Row summary: ${rowSummary}`</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="operator"> </span><span class="keyword">return</span><span class="operator"> </span><span class="variable">lines</span><span class="operator">.</span><span class="function">join</span><span class="operator">(</span><span class="string">&#039;\n&#039;</span><span class="operator">)</span><span class="operator">;</span></div>
            <div class="code-line"><span class="operator"> </span><span class="operator"> </span><span class="operator">}</span><span class="operator">,</span></div>
            <div class="code-line"><span class="operator">}</span><span class="operator">;</span></div>
            <div class="code-line"></div>
        </div>
    </div>
</body>
</html>